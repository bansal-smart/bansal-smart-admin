<%- include('../layouts/header') %>

<div class="content-body">
  <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <div class="card">
            <div class="card-header d-flex align-items-center justify-content-between">
                <h4 class="card-title mb-0"><%= page_name %></h4>
          
                <div class="row">
                  <div class="col-12 text-end">
                    <% if (req.query.status==='trashed' ) { %>
                    <a class="btn btn-primary" href="<%= list_url %>">
                      <i class="fas fa-list"></i>
                    </a>
                    <% } else { %>
                    <a class="btn btn-danger btn-sm" href="<%= trashed_list_url %>">
                      <i class="fas fa-trash"></i> 
                    </a>
                    <% } %>
          
                    <a class="btn btn-info btn-sm" href="<%= create_url %>">
                      <i class="fas fa-plus"></i> 
                    </a>
                    <button type="button" id="backButton" class="btn btn-primary btn-sm">
                      <i class="fa fa-arrow-left"></i> 
                    </button>
                  </div>
                </div>
            </div>

          <div class="card-body">
             <!-- <form method="post" action="/admin/coupon-list" class="row mb-4">
  <div class="col-md-3">
    <label>Filter by Type</label>
    <select name="type" class="form-control">
      <option value="">-- All Types --</option>
      <option value="public" <%= req.query.type === 'public' ? 'selected' : '' %>>Public</option>
      <option value="private" <%= req.query.type === 'private' ? 'selected' : '' %>>Private</option>
    </select>
  </div>

  <% if (req.query.status !== 'trashed') { %>
    <div class="col-md-3">
      <label>Filter by Status</label>
      <select name="coupon_status" class="form-control">
        <option value="">-- All Status --</option>
        <option value="1" <%= req.query.coupon_status === '1' ? 'selected' : '' %>>Active</option>
        <option value="0" <%= req.query.coupon_status === '0' ? 'selected' : '' %>>Inactive</option>
      </select>
    </div>
  <% } %>

  <div class="col-md-3 d-flex align-items-end">
    <button type="submit" class="btn btn-primary me-2">
      <i class="fas fa-filter"></i> Filter
    </button>
    <a href="/admin/coupon-list" class="btn btn-secondary">
      <i class="fas fa-times"></i> Reset
    </a>
  </div>
</form> -->
            <div class="table-responsive">
              <table id="example3" class="display table-responsive-lg">
          <thead>
            <tr>
              <th>Sr.No #</th>

              <th>Coupon Name</th>
              <th>Coupon Type</th>
              <th>Begin Date</th>
              <th>End Date</th>
              <th>Coupon Code</th>
              <th>Type</th>

              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% coupons.forEach((post, index) => { %>
            <tr>
              <td><%= index + 1 %></td>

              <td><%= post.coupon_name || '-' %></td>
              <td><%= post.coupon_type || '-' %></td>
              <td><%= post.begin_date || '-' %></td>
              <td><%= post.end_date || '-' %></td>
              <td><%= post.coupon_code || '-' %></td>
              <td><%= post.type || '-' %></td>

              <td>
                <% if (post.status == 1) { %>
                <span class="badge badge-success">Active</span>
                <% } else { %>
                <span class="badge badge-danger">Inactive</span>
                <% } %>
              </td>
       
               <td>
                      <a
                        href="/admin/coupon-show/<%= post.id %>"
                        class="btn btn-primary shadow btn-xs sharp me-1"
                        ><i class="fas fa-eye"></i
                      ></a>
                      <a
                        href="/admin/coupon-edit/<%= post.id %>"
                        class="btn btn-primary shadow btn-xs sharp me-1"
                        ><i class="fas fa-pencil-alt"></i
                      ></a>
                      <a
                        href="/admin/coupon-delete/<%= post.id %>"
                        class="btn btn-danger shadow btn-xs sharp"
                        ><i class="fa fa-trash"></i
                      ></a>
                    </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
</div>

</div>

</div>

<%- include('../layouts/footer') %>



<script>
  $(document).ready(function () {
    $("#order-listing").DataTable();
  });
</script>
